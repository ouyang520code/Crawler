import{_ as I,a as P}from"./right-35a0432f.js";import{w as i,$ as k,a as C}from"./apis-e000dd75.js";import{d as W,r as a,o as E,a as F,b as c,e as r,f as s,g as K,t as o,h as U,F as y,i as b,j as z,_ as D}from"./index-de3d961b.js";const L={class:"minxi"},M={class:"inpt"},R={class:"info"},$={style:{"margin-left":"10px"}},j={class:"water"},q={class:"foote"},G={class:"box_list"},H={class:"phone_list"},J={class:"detail_list"},O={class:"pages"},Q={class:"limit"},X=W({__name:"index",setup(Y){const d=a(1),v=a([]),x=a(0),u=a(""),p=a(0),_=a(null),w=a(0),N=a(!1),g=a([]),V=()=>{d.value+=1,h()},A=()=>{if(d.value==1)return 1;d.value-=1,h()},h=()=>{k.getAddressdinate({address:u.value,page:d.value,limit:30}).then(e=>{e.code==200?(e.data.forEach((t,n)=>{t.hash=t.tx.substring(0,4)+"......"+t.tx.slice(-4),v.value.push(t)}),console.log("res地址查询坐标>>>",v.value),g.value=B(),console.log("rows>>>",g.value)):(C("查询失败"),console.log("res失败>>",e))}).catch(e=>{C("查询失败"),console.log("err地址查询坐标>>>",e)})},B=()=>{const e=[[],[],[]];return v.value.forEach((l,t)=>{const n=Math.floor(t/10);n<e.length&&e[n].push(l)}),e},S=async()=>{var e;if((e=_.value)!=null&&e.publicKey)try{u.value=_.value.publicKey.toString(),u.value.length>0&&(h(),T()),x.value=await i.getTokenBalance(_.value.publicKey)}catch(l){console.error("获取钱包信息失败:",l)}},T=()=>{k.getUserinfo({address:u.value}).then(e=>{e.code==200&&(console.log("res>>>用户信息",e),w.value=e.data.all_point,p.value=e.data.node_success)}).catch(e=>{console.log("err>>>用户信息",e)})};return E(async()=>{try{const e=i.getPhantomWallet();e!=null&&e.isConnected&&(await e.disconnect(),await new Promise(l=>setTimeout(l,500))),await i.connectWallet()}catch(e){console.error("Wallet initialization error:",e)}i.setCallbacks({onConnect:async e=>{console.log("钱包已连接"),_.value=e,N.value=!0,await S()},onDisconnect:()=>{console.log("钱包已断开连接"),u.value="",p.value=0,w.value=0,x.value=0}}),i.initWalletListeners()}),F(()=>{const e=i.getPhantomWallet();e!=null&&e.isConnected&&e.disconnect(),i.cleanup()}),(e,l)=>{const t=z("van-field");return c(),r("div",L,[l[6]||(l[6]=s("div",{class:"biaoti"},"爬虫信息查询",-1)),s("div",M,[K(t,{modelValue:e.value1,"onUpdate:modelValue":l[0]||(l[0]=n=>e.value1=n),"left-icon":"search",placeholder:"请输入....",center:"true"},null,8,["modelValue"]),l[1]||(l[1]=s("div",{class:"btn"},"确认",-1))]),s("div",R,[s("span",null,"地址："+o(u.value),1),s("div",null,[U(" NFT："+o(p.value),1),s("span",$,o(p.value>0?"已产生":"未产生"),1)])]),s("div",j,[l[3]||(l[3]=s("div",{class:"head"},"ReptileSCAN",-1)),s("div",q,[(c(!0),r(y,null,b(g.value,(n,f)=>(c(),r("div",{class:"box",key:f},[l[2]||(l[2]=s("div",{class:"box_head"},[s("span",null,"哈希"),s("span",null,"坐标")],-1)),s("div",G,[(c(!0),r(y,null,b(n,(m,Z)=>(c(),r("div",{class:"list",key:f},[s("span",null,o(m.hash),1),s("span",null,o(m.x)+" + "+o(m.y),1)]))),128))])]))),128))])]),s("div",H,[l[5]||(l[5]=s("div",{style:{"font-size":"18px",color:"#ffffff"}},"ReptileSCAN",-1)),s("div",J,[l[4]||(l[4]=s("div",{class:"phone_head"},[s("span",null,"哈希"),s("span",null,"坐标")],-1)),(c(!0),r(y,null,b(v.value,(n,f)=>(c(),r("div",{class:"liushui",key:f},[s("span",null,o(n.hash),1),s("span",null,o(n.x)+" + "+o(n.y),1)]))),128))])]),s("div",O,[s("div",Q,[s("img",{src:I,alt:"",onClick:A}),s("span",null,o(d.value)+" / 页",1),s("img",{src:P,alt:"",onClick:V})])])])}}});const ne=D(X,[["__scopeId","data-v-bfb8255b"]]);export{ne as default};
